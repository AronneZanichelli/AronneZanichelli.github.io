const translations = {
  en: {
    nav: { about: 'About', skills: 'Skills', timeline: 'Education', portfolio: 'Portfolio', contact: 'Contact' },
    hero: {
      positioning: 'Junior Developer with creative and AI-oriented skills.',
      subtitle:
        'I build practical digital experiences by combining development fundamentals, visual communication, and strategic content thinking.',
      ctaCv: 'Download CV',
      ctaContact: 'Contact'
    },
    about: {
      title: 'About Me',
      bio:
        'I am Aronne Zanichelli, an IT graduate currently studying as an IFTS graphic technician and AI-based social media manager. I combine coding logic with creative execution to produce projects that are clear, useful, and visually effective. I am motivated to grow in junior technical roles where I can ship real products and improve fast.',
      goalTitle: 'Professional Goal',
      goalText:
        'Entering the world of video games and creating interactive worlds based on personal rules, with a vision that includes virtual reality technologies. I am looking for junior roles in development (game dev / web dev) where I can combine programming and digital creativity.'
    },
    skills: {
      title: 'Technical Skills',
      html: 'HTML and CSS for responsive interfaces (solid foundations)',
      java: 'Java for object-oriented projects',
      cpp: 'C++ foundations for logic and performance',
      python: 'Python (beginner level, currently building fundamentals)',
      sql: 'SQL and relational database fundamentals',
      creative: 'DaVinci Resolve, Office Suite, Adobe Suite (basic/intermediate)'
    },
    softSkills: {
      title: 'Soft Skills',
      one: 'Problem solving',
      two: 'Fast learning mindset',
      three: 'Teamwork and communication',
      four: 'Creative discipline and reliability'
    },
    timeline: {
      title: 'Education & Experience',
      diplomaTitle: 'Diploma - IT Technician',
      diplomaDesc: 'Completed secondary technical education with a focus on computer science.',
      iftsTitle: 'Current - IFTS Graphic Technician & AI-based Social Media Manager',
      iftsDesc: 'Training path combining visual design, media strategy, and AI-oriented digital workflows.',
      templateTitle: 'Future Role / Project (Template)',
      templateDesc: 'Add your next internship, freelance experience, or shipped project here.'
    },
    portfolio: {
      title: 'Portfolio',
      project1Title: 'Web Landing Page for Tech Profile',
      project1Desc:
        'Designed and built a responsive personal landing page focused on clear value proposition, bilingual content, and recruiter-ready structure.',
      project2Title: 'Visual Content Workflow Concept',
      project2Desc:
        'Created a production workflow concept integrating copy, graphics, and short video editing using DaVinci Resolve and Adobe tools.',
      inProgressTitle: 'Projects in Development',
      inProgressDesc:
        'Dependency Monitoring App: concept and implementation of a lightweight app to track package dependencies, detect outdated modules, and improve project maintenance visibility.'
    },
    cv: {
      title: 'Download CV',
      description: 'Download English or Italian CV in PDF, or use print mode to generate a tailored version directly from this site.',
      downloadEn: 'Download CV (EN)',
      downloadIt: 'Download CV (IT)',
      print: 'Print / Save as PDF'
    },
    contact: {
      title: 'Contact',
      formName: 'Name',
      formEmail: 'Email',
      formMessage: 'Message',
      send: 'Send message',
      success: 'Thanks! Your mail client is opening.',
      error: 'Please complete all fields with a valid email.',
      integrationTitle: 'Form integration snippets'
    },
    footer: { language: 'Language: English' }
  },
  it: {
    nav: { about: 'Chi sono', skills: 'Competenze', timeline: 'Formazione', portfolio: 'Portfolio', contact: 'Contatti' },
    hero: {
      positioning: 'Junior Developer con competenze creative e AI-oriented.',
      subtitle:
        'Realizzo esperienze digitali pratiche unendo basi di sviluppo, comunicazione visiva e pensiero strategico sui contenuti.',
      ctaCv: 'Scarica CV',
      ctaContact: 'Contattami'
    },
    about: {
      title: 'Chi sono',
      bio:
        'Sono Aronne Zanichelli, perito informatico e attualmente in formazione come tecnico grafico IFTS e social media manager AI-based. Unisco logica di programmazione e creatività per sviluppare progetti chiari, utili e curati dal punto di vista visivo. Voglio crescere in ruoli tecnici junior dove poter consegnare prodotti reali e migliorare rapidamente.',
      goalTitle: 'Obiettivo professionale',
      goalText:
        'Entrare nel mondo dei videogiochi e creare mondi interattivi basati su regole personali, con una visione che includa tecnologie di realtà virtuale. Cerco ruoli junior nello sviluppo (game dev / web dev) dove unire programmazione e creatività digitale.'
    },
    skills: {
      title: 'Competenze tecniche',
      html: 'HTML e CSS per interfacce responsive (basi solide)',
      java: 'Java per progetti orientati agli oggetti',
      cpp: 'Basi di C++ per logica e performance',
      python: 'Python (livello iniziale, sto consolidando i fondamentali)',
      sql: 'SQL e fondamenti di database relazionali',
      creative: 'DaVinci Resolve, Pacchetto Office, Pacchetto Adobe (base/intermedio)'
    },
    softSkills: {
      title: 'Soft Skills',
      one: 'Problem solving',
      two: 'Apprendimento rapido',
      three: 'Teamwork e comunicazione',
      four: 'Disciplina creativa e affidabilità'
    },
    timeline: {
      title: 'Formazione ed esperienza',
      diplomaTitle: 'Diploma - Perito Informatico',
      diplomaDesc: 'Percorso tecnico secondario completato con focus informatico.',
      iftsTitle: 'Attualmente - IFTS Tecnico Grafico & Social Media Manager AI-based',
      iftsDesc: 'Percorso che integra design visivo, strategia media e workflow digitali orientati all\'AI.',
      templateTitle: 'Ruolo / Progetto futuro (Template)',
      templateDesc: 'Aggiungi qui il prossimo stage, lavoro freelance o progetto pubblicato.'
    },
    portfolio: {
      title: 'Portfolio',
      project1Title: 'Landing Page Web per profilo tech',
      project1Desc:
        'Progettazione e sviluppo di una landing page personale responsive con posizionamento chiaro, contenuti bilingue e struttura orientata ai recruiter.',
      project2Title: 'Concept workflow per contenuti visual',
      project2Desc:
        'Creazione di un concept di produzione che integra copy, grafica ed editing video breve usando DaVinci Resolve e strumenti Adobe.',
      inProgressTitle: 'Progetti in sviluppo',
      inProgressDesc:
        'App di monitoraggio delle dipendenze: progettazione e sviluppo di una app leggera per tracciare dipendenze, individuare moduli obsoleti e migliorare la visibilità sulla manutenzione.'
    },
    cv: {
      title: 'Download CV',
      description: 'Scarica il CV in PDF in inglese o italiano, oppure usa la stampa per generare una versione personalizzata direttamente dal sito.',
      downloadEn: 'Scarica CV (EN)',
      downloadIt: 'Scarica CV (IT)',
      print: 'Stampa / Salva PDF'
    },
    contact: {
      title: 'Contatti',
      formName: 'Nome',
      formEmail: 'Email',
      formMessage: 'Messaggio',
      send: 'Invia messaggio',
      success: 'Grazie! Il client email si sta aprendo.',
      error: 'Compila tutti i campi con una email valida.',
      integrationTitle: 'Snippet integrazione form'
    },
    footer: { language: 'Lingua: Italiano' }
  }
};

const getValueByPath = (obj, path) => path.split('.').reduce((acc, key) => acc?.[key], obj);

function applyLanguage(lang) {
  const safeLang = translations[lang] ? lang : 'en';
  document.documentElement.lang = safeLang;
  localStorage.setItem('lang', safeLang);

  document.querySelectorAll('[data-i18n]').forEach((el) => {
    const key = el.getAttribute('data-i18n');
    const value = getValueByPath(translations[safeLang], key);
    if (value) el.textContent = value;
  });

  document.querySelectorAll('.lang-btn').forEach((btn) => {
    btn.classList.toggle('active', btn.dataset.lang === safeLang);
  });
}

function setupTheme() {
  const savedTheme = localStorage.getItem('theme') || 'dark';
  document.body.classList.toggle('light', savedTheme === 'light');
  document.getElementById('themeToggle').textContent = savedTheme === 'light' ? '☀︎' : '☾';

  document.getElementById('themeToggle').addEventListener('click', () => {
    const isLight = document.body.classList.toggle('light');
    localStorage.setItem('theme', isLight ? 'light' : 'dark');
    document.getElementById('themeToggle').textContent = isLight ? '☀︎' : '☾';
  });
}

function setupMenu() {
  const toggle = document.getElementById('menuToggle');
  const menu = document.getElementById('navMenu');
  toggle.addEventListener('click', () => {
    const open = menu.classList.toggle('open');
    toggle.setAttribute('aria-expanded', String(open));
  });
}

function setupContactForm() {
  const form = document.getElementById('contactForm');
  const feedback = document.getElementById('formFeedback');

  form.addEventListener('submit', (event) => {
    event.preventDefault();
    const lang = localStorage.getItem('lang') || 'en';

    const name = form.name.value.trim();
    const email = form.email.value.trim();
    const message = form.message.value.trim();
    const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

    if (!name || !emailValid || !message) {
      feedback.textContent = translations[lang].contact.error;
      return;
    }

    const subject = encodeURIComponent(`Portfolio contact from ${name}`);
    const body = encodeURIComponent(`${message}\n\nFrom: ${name} (${email})`);
    window.location.href = `mailto:aronnezanichelli@gmail.com?subject=${subject}&body=${body}`;
    feedback.textContent = translations[lang].contact.success;
    form.reset();
  });
}

function init() {
  const preferredLang = localStorage.getItem('lang') || 'en';
  applyLanguage(preferredLang);

  document.querySelectorAll('.lang-btn').forEach((btn) => {
    btn.addEventListener('click', () => applyLanguage(btn.dataset.lang));
  });

  setupTheme();
  setupMenu();
  setupContactForm();

  document.getElementById('printCv').addEventListener('click', () => window.print());
  document.getElementById('year').textContent = new Date().getFullYear();
}

document.addEventListener('DOMContentLoaded', init);
